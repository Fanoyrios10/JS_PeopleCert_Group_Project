<div class="cart_start_container">
  <div class="contact_header">
    <div class="header-left">
      <img src="/images/cyberCafeLogo.png" alt="cyberCafeLogo" width="140" height="100" />
    </div>
    <div class="header-right">
      <div class="header-right-links">
        <a href="/demo/homepage">Home</a>
        <a href="/signup">Sign-Up</a>
        <a href="/login">Sign-In</a>
        <a href="/logout">Logout</a>
        <a href="/demo/homepage/shop">Shop</a>
        <a href="/demo/contact-us">Contact Us</a>
        <a href="/cart"><i class="fa fa-shopping-cart"></i>
          <% if (req.session.cart) { %>
          <span class="badge badge-danger"><%= req.session.cart.totalQty %></span>
          <% } %>
    </a>
    </div>
  </div>
 </div>
</div>

<div class="container">
  <div class="row">
    <h2 class="cart">Cart</h2>
  </div>
  <div class="row">
    <div class="col-lg-8">
      <% if (items == 0 || items.totalQty == 0 ) { -%>

      <p class="emtycart">Sorry, you got no items in your cart</p>
      <a class="emtycart" a href="/demo/homepage/shop">Lets fix that!</a>
      <% } else { -%>
        
      <table class="table table-borderless" >
        <thead class="cartthead">
          <tr>
            <th class="carttd">Item</th>
            <th class="carttd">Quantity</th>
            <th class="carttd">Price</th>
            <th></th>
          </tr>
        </thead class="cartthead">
        <tbody class="carttbody">
          <% Object.keys(items).forEach( function(item) { %>
          <tr>
            <td class="carttd"><%= items[item].product.name %></td>
            <td class="carttd">
              <form action="/update-cart-item" method="post">
                <input type="hidden" name="_csrf" value="<%= _csrf %>" />
                <select name="quantity">
                  <option value="<%= items[item].qty %>" selected>
                    <%= items[item].qty %>
                  </option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                </select>
                <input
                  type="hidden"
                  name="productId"
                  value="<%= items[item].product.id %>"
                />
                <button type="submit" class="btn">Update</button>
              </form>
            </td>
            <td><%= items[item].product.price * items[item].qty%></td>
            <td><a href="/remove-item/<%= items[item].product.id %>">x</a></td>
          </tr>
          <% }) %>
        </tbody>
      </table>
      <div id="paypal-button"></div>

      <% } -%>
    </div>
  </div>
</div>
<script>
      let layoutHeaderHome = document.querySelector('.header');
    let documentFullHeight = document.documentElement.clientHeight;
    window.onscroll = function () {
        scrollFunction();
    };
    function scrollFunction() {
        if (
            document.body.scrollTop > 480 ||
            document.documentElement.scrollTop > 480
        ) {
            layoutHeaderHome.style.display = 'block';
            layoutHeaderHome.classList.remove("animate__fadeOutUp")
            layoutHeaderHome.classList.add("animate__fadeInDown")
        } else {
            layoutHeaderHome.style.display = 'none';
            layoutHeaderHome.classList.add("animate__fadeOutUp")
            layoutHeaderHome.classList.remove("animate__fadeInDown")
        }
    } 
    
</script> 

<script src="https://www.paypalobjects.com/api/checkout.js"></script>
<script>
  paypal.Button.render({
    // Configure environment
    env: 'sandbox',
    client: {
      sandbox: 'ASacIfWemabfH-WLAQtGqofToAhVXtscByXX9eYp5NTIpPX9j5pFUbpvWo5fmXVkp8UBAaNozYizM8ZD',
      production: 'demo_production_client_id'
    },
    // Customize button 
    locale: 'en_US',
    style: {
      size: 'responsive',
      color: 'blue',
      shape: 'pill',
    },

    // Enable Pay Now checkout flow (optional)
    commit: true,

    // Set up a payment
    payment: function(data, actions) {
      return actions.payment.create({
        transactions: [{
          amount: {
            total: '55.01',
            currency: 'USD'
          }
        }]
      });
    },
    // Execute the payment
    onAuthorize: function(data, actions) {
      return actions.payment.execute().then(function() {
        // Show a confirmation message to the buyer
        window.alert('Thank you for your purchase!');
      });
    }
  }, '#paypal-button');

  

</script>