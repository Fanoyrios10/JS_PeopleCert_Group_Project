<div class="container">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/products">Categories</a></li>
    <li class="breadcrumb-item active">Manage Categories</li>
  </ol>

  <div class="container">
    <table class="table table-dark table-hover table-bordered">
      <thead>
        <tr class="text-center">
          <th>Name</th>
          <th>Description</th>
          <th>EDIT/DELETE</th>
        </tr>
      </thead>
      <tbody>
        <% let categ = categories%> <%categories.forEach(function(category) {%>
        <tr class="text-center">
          <td class="align-middle"><%=category.Name%></td>
          <td class="align-middle"><%=category.Description%></td>
          <td>
            <button
              id="Edit_button_<%=category.id%>"
              class="btn btn-primary btn-block edit_button"
            >
              <i class="fa fa-edit"></i> Edit</button
            ><button
              id="Delete_button_<%=category.id%>"
              class="btn btn-danger btn-block delete_button"
            >
              <i class="fa fa-trash"></i> Delete
            </button>
          </td>
        </tr>
        <%})%>
      </tbody>
    </table>
  </div>
  <div class="container">
    <button class="btn btn-success" id="Add_button">
      <i class="fa fa-plus"></i> Add Category
    </button>
  </div>
  <div id="admin_add_category_form" class="container">
    <h4 class="display-5">Add Category</h4>
    <form action="/category/add" method="post" style="width: 50%">
      <input type="hidden" name="_csrf" value="<%= _csrf %>" />
      <div class="form-group">
        <label for="Add_name">Category name:</label>
        <input type="text" name="Add_name" class="form-control" />
      </div>

      <div class="form-group">
        <label for="Add_description">Description:</label>
        <textarea
          name="Add_description"
          id="description"
          cols="3"
          class="form-control"
        ></textarea>
      </div>

      <button type="submit" class="btn btn-success">Submit</button>
    </form>
  </div>
  <div id="admin_edit_category_form" class="container">
    <h4 class="display-5">Edit Category</h4>
    <form action="/category/add" method="post" style="width: 50%">
      <input type="hidden" name="_csrf" value="<%= _csrf %>" />
      <div class="form-group">
        <label for="Edit_name">Category name:</label>
        <input type="text" name="Edit_name" class="form-control" />
      </div>

      <div class="form-group">
        <label for="Edit_description">Description:</label>
        <textarea
          name="Edit_description"
          id="description"
          cols="3"
          class="form-control"
        ></textarea>
      </div>

      <button type="submit" class="btn btn-success">Submit</button>
    </form>
  </div>
  <div id="admin_delete_category_form" class="container">
    <h4 class="display-5">Delete Category</h4>
    <form action="/category/add" method="post" style="width: 50%">
      <input type="hidden" name="_csrf" value="<%= _csrf %>" />
      <div class="form-group">
        <label for="Delete_name">Category name:</label>
        <input type="text" name="Delete_name" class="form-control" />
      </div>

      <div class="form-group">
        <label for="Delete_description">Description:</label>
        <textarea
          name="Delete_description"
          id="description"
          cols="3"
          class="form-control"
        ></textarea>
      </div>

      <button type="submit" class="btn btn-success">Submit</button>
    </form>
  </div>
</div>
<script>
  let cate = "<%=categ%>";
  console.log(cate.id);
  let createForm = document.querySelector("#admin_add_category_form");
  let editForm = document.querySelector("#admin_edit_category_form");
  let deleteForm = document.querySelector("#admin_delete_category_form");
  let editButtons = document.querySelectorAll(".edit_button");
  let deleteButtons = document.querySelectorAll(".delete_button");
  let createButton = document.querySelector("#Add_button");
  createForm.style.display = "none";
  editForm.style.display = "none";
  deleteForm.style.display = "none";
  createButton.addEventListener("click", function () {
    editForm.style.display = "none";
    deleteForm.style.display = "none";
    createForm.style.display = "block";
  });
  editButtons.forEach((item) => {
    item.addEventListener("click", function (e) {
      editForm.style.display = "block";
      deleteForm.style.display = "none";
      createForm.style.display = "none";
      console.log(item.id);
    });
  });
</script>
